<!DOCTYPE html>
<!--********************************************-->
<!--*       Generated from PreTeXt source      *-->
<!--*       on 2023-07-11T14:41:06-04:00       *-->
<!--*   A recent stable commit (2022-07-01):   *-->
<!--* 6c761d3dba23af92cba35001c852aac04ae99a5f *-->
<!--*                                          *-->
<!--*         https://pretextbook.org          *-->
<!--*                                          *-->
<!--********************************************-->
<html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script>
var runestoneMathReady = new Promise((resolve) => window.rsMathReady = resolve);
window.MathJax = {
  "tex": {
    "inlineMath": [
      [
        "\\(",
        "\\)"
      ]
    ],
    "tags": "none",
    "tagSide": "right",
    "tagIndent": ".8em",
    "packages": {
      "[+]": [
        "base",
        "extpfeil",
        "ams",
        "amscd",
        "color",
        "newcommand",
        "knowl"
      ]
    }
  },
  "options": {
    "ignoreHtmlClass": "tex2jax_ignore|ignore-math",
    "processHtmlClass": "process-math",
    "renderActions": {
      "findScript": [
        10,
        function (doc) {
            document.querySelectorAll('script[type^="math/tex"]').forEach(function(node) {
                var display = !!node.type.match(/; *mode=display/);
                var math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
                var text = document.createTextNode('');
                node.parentNode.replaceChild(text, node);
                math.start = {node: text, delim: '', n: 0};
                math.end = {node: text, delim: '', n: 0};
                doc.math.push(math);
            });
        },
        ""
      ]
    }
  },
  "chtml": {
    "scale": 0.98,
    "mtextInheritFont": true
  },
  "loader": {
    "load": [
      "input/asciimath",
      "[tex]/extpfeil",
      "[tex]/amscd",
      "[tex]/color",
      "[tex]/newcommand",
      "[pretext]/mathjaxknowl3.js"
    ],
    "paths": {
      "pretext": "https://pretextbook.org/js/lib"
    }
  },
  "startup": {
    pageReady() {
      return MathJax.startup.defaultPageReady().then(function () {
      console.log("in ready function");
      rsMathReady();
      }
    )}
  }
};
</script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
</head>
<body>
<div id="latex-macros" class="hidden-content process-math" style="display:none"><span class="process-math">\(\require{cancel}\newcommand{\definiteintegral}[4]{\int_{#1}^{#2}\,#3\,d#4} 
\newcommand{\myequation}[2]{#1\amp =#2} 
\newcommand{\indefiniteintegral}[2]{\int#1\,d#2}
\newcommand{\testingescapedpercent}{ \% } 
\newcommand{\lt}{&lt;}
\newcommand{\gt}{&gt;}
\newcommand{\amp}{&amp;}
\definecolor{fillinmathshade}{gray}{0.9}
\newcommand{\fillinmath}[1]{\mathchoice{\colorbox{fillinmathshade}{$\displaystyle     \phantom{\,#1\,}$}}{\colorbox{fillinmathshade}{$\textstyle        \phantom{\,#1\,}$}}{\colorbox{fillinmathshade}{$\scriptstyle      \phantom{\,#1\,}$}}{\colorbox{fillinmathshade}{$\scriptscriptstyle\phantom{\,#1\,}$}}}
\newcommand{\sfrac}[2]{{#1}/{#2}}
\)</span></div>
<section class="section" id="section-7"><h2 class="heading hide-type">
<span class="type">Section</span> <span class="codenumber">7</span> <span class="title">Mathematics</span>
</h2>
<section class="introduction" id="introduction-15"><div class="para" id="p-280">To be able to create both <span class="latex-logo">L<span class="A">a</span>T<span class="E">e</span>X</span> and HTML output (plus variations), we rely on MathJax, which in turn supports an extensive subset of the mathematical symbols normally available.  The AMSMath symbol set is a good approximation.  The PreTeXt Guide has a link to the complete list of macros supported by MathJax.  We load the <code class="code-inline tex2jax_ignore">AMSsymbols</code> library and the library for extensible arrows, <code class="code-inline tex2jax_ignore">extpfeil</code>.</div></section><section class="subsection" id="subsection-8"><h3 class="heading hide-type">
<span class="type">Subsection</span> <span class="codenumber">7.1</span> <span class="title">Basic Mathematics</span>
</h3>
<div class="para logical" id="p-281">
<div class="para">The following is from the MathJax <a class="external" href="http://www.mathjax.org/demos/tex-samples/" target="_blank">demonstration page</a><a href="" data-knowl="" class="id-ref fn-knowl original" data-refid="hk-fn-13" id="fn-13"><sup> 1 </sup></a>, an identity due to Ramanujan:</div>
<div class="displaymath process-math">
\begin{equation*}
\frac{1}{\Bigl(\sqrt{\phi \sqrt{5}}-\phi\Bigr) e^{\frac25 \pi}} = 1+\frac{e^{-2\pi}} {1+\frac{e^{-4\pi}} {1+\frac{e^{-6\pi}} {1+\frac{e^{-8\pi}} {1+\ldots} } } }
\end{equation*}
</div>
</div>
<div class="para logical" id="p-282">
<div class="para">And again, from the MathJax demonstration page, Maxwell’s equations:</div>
<div class="displaymath process-math" id="md-4">
\begin{align*}
\nabla \times \vec{\mathbf{B}} -\, \frac1c\, \frac{\partial\vec{\mathbf{E}}}{\partial t} &amp; = \frac{4\pi}{c}\vec{\mathbf{j}}\\
\nabla \cdot \vec{\mathbf{E}} &amp; = 4 \pi \rho\\
\nabla \times \vec{\mathbf{E}}\, +\, \frac1c\, \frac{\partial\vec{\mathbf{B}}}{\partial t} &amp; = \vec{\mathbf{0}}\\
\nabla \cdot \vec{\mathbf{B}} &amp; = 0
\end{align*}
</div>
</div>
<div class="para logical" id="p-283">
<div class="para">A small test that the extensible arrows library is included properly:</div>
<div class="displaymath process-math">
\begin{equation*}
A\xmapsto[\text{bijection}]{\Phi+\Psi+\Theta}B
\end{equation*}
</div>
</div>
<div class="para" id="p-284">Look back at the top of the source file of this document to see how to include your <span class="latex-logo">T<span class="E">e</span>X</span> macros just once.  For best results keep your macros simple and semantic.</div>
<div class="para" id="p-285">PreTeXt provides modest built-in support for “slanted”, or “beveled”, or “nice” fractions.  To wit, we mean fractions such as: <span class="process-math">\(\sfrac{3}{8}\text{.}\)</span>  Use the pre-defined <code class="code-inline tex2jax_ignore">\sfrac{}{}</code> macro in your mathematics to achieve this presentation.  (The presentation in HTML output could be improved.  Please make suggestions if your skills with <span class="latex-logo">L<span class="A">a</span>T<span class="E">e</span>X</span> macros and knowledge of MathJax’s supported commands warrant.)</div>
<div class="para logical" id="p-286">
<div class="para">We consider a system of equations.  We number the first and last equation (there are just two) and include an <code class="code-inline tex2jax_ignore">xml:id</code> on each.  We reference the whole system later as the range of equations from the first to the last.</div>
<div class="displaymath process-math" id="mdn-3">
\begin{align}
\frac{dx}{dt} \amp = x^2 - 4x - y + 4\tag{7.1}\\
\frac{dy}{dt} \amp = x^3 - y.\tag{7.2}
\end{align}
</div>
</div></section><section class="subsection" id="subsection-9"><h3 class="heading hide-type">
<span class="type">Subsection</span> <span class="codenumber">7.2</span> <span class="title">Displayed Mathematics</span>
</h3>
<div class="para" id="p-287">Multi-line displays of mathematics are achieved with the <code class="code-inline tex2jax_ignore">md</code> tag (“math display”), and the variant that produces numbers on each line, <code class="code-inline tex2jax_ignore">mdn</code> (“math display numbered”), used within a paragraph (<code class="code-inline tex2jax_ignore">p</code>).  As a good example of how XML syntax is superior, you author <span class="process-math">\(n\)</span> lines of equations by enclosing each line inside of a <code class="code-inline tex2jax_ignore">mrow</code> tag, rather than using <span class="process-math">\(n-1\)</span> separators (such as <code class="code-inline tex2jax_ignore">\\</code>).</div>
<div class="para logical" id="p-288">
<div class="para">If you use no ampersands to express alignment (read ahead), then each equation is centered independently on the width of the text.  This is implemented according to the AMSmath <span class="latex-logo">L<span class="A">a</span>T<span class="E">e</span>X</span> package’s <code class="code-inline tex2jax_ignore">gather</code> environment.  Example:</div>
<div class="displaymath process-math" id="md-5">
\begin{gather*}
\frac{dx}{dt} = x^2 - 4x - y + 4\\
\frac{dy}{dt} = x^3 - y.
\end{gather*}
</div>
</div>
<div class="para logical" id="p-289">
<div class="para">An ampersand is used, in two ways, to describe positioning several equations per line, organized in columns.  We have created the pre-defined <span class="latex-logo">L<span class="A">a</span>T<span class="E">e</span>X</span> macro <code class="code-inline tex2jax_ignore">\amp</code> as one way specify these, but the escape sequence <code class="code-inline tex2jax_ignore">&amp;amp;</code> may be used also.  The second, fourth, sixth, … ampersands separate columns, and the spacing between columns will be provided automatically.  The first, third, fifth, … ampersands are alignment points for the equations in each column.  Typically this is placed just prior to a binary operator, such as an equal sign (<code class="code-inline tex2jax_ignore">\amp = </code>), or for a column of explanations or commentary, just prior to the <code class="code-inline tex2jax_ignore">\text{}</code> macro.  Note that this scenario suggests always having an odd number of ampersands in each <code class="code-inline tex2jax_ignore">mrow</code>.  In the example below, alignment is on the equals sign in the first two columns, and provides left-justification to the explanations in the third column.  N.B.: the use below of the <code class="code-inline tex2jax_ignore">\text{}</code> macro does not include mathematics within its argument.  Doing so may yield unpredictable results depending on your choice of delimiters for the mathematics (and using an <code class="code-inline tex2jax_ignore">m</code> tag will be ineffective).</div>
<div class="displaymath process-math" id="md-6">
\begin{align*}
\frac{dx}{dt} \amp = x^2 - 4x - y + 4 \amp \frac{dy}{dt} \amp = x^3 - y          \amp\amp x, y\text{ version}\\
\frac{dw}{dt} \amp = z^3 - w          \amp \frac{dz}{dt} \amp = z^2 - 4z - w + 4 \amp\amp z, w\text{ version}
\end{align*}
</div>
</div>
<div class="para logical" id="p-290">
<div class="para">PreTeXt will automatically detect the presence or absence of ampersands, but by defining macros for entire aligned equations, you can effectively hide the ampersands.  So the <code class="code-inline tex2jax_ignore">@alignment</code> attribute can override automatic detection.  We use a simple <span class="latex-logo">L<span class="A">a</span>T<span class="E">e</span>X</span> macro to demonstrate setting <code class="code-inline tex2jax_ignore">alignment='align'</code> to override the use of a <code class="code-inline tex2jax_ignore">gather</code> environment and use a <code class="code-inline tex2jax_ignore">align</code> environment instead.  Example:</div>
<div class="displaymath process-math" id="md-7">
\begin{align*}
\myequation{\frac{dx}{dt}}{x^2 - 4x - y + 4}\\
\myequation{\frac{dy}{dt}}{x^3 - y}.
\end{align*}
</div>
</div>
<div class="para logical" id="p-291">
<div class="para">The AMSmath <span class="latex-logo">L<span class="A">a</span>T<span class="E">e</span>X</span> package’s <code class="code-inline tex2jax_ignore">alignat</code> environment is a third variant of alignment.  It never happens automatically, you need to ask for it with <code class="code-inline tex2jax_ignore">alignment="alignat"</code>.  It is very similar to <code class="code-inline tex2jax_ignore">align</code> but adds no space between the equation columns.  So you can leave it that way, or you can add your own “extra” space to suit.  Here is a previous example with no inter-column space:</div>
<div class="displaymath process-math" id="md-8">
\begin{alignat*}{3}
\frac{dx}{dt} \amp = x^2 - 4x - y + 4 \amp \frac{dy}{dt} \amp = x^3 - y          \amp\amp x, y\text{ version}\\
\frac{dw}{dt} \amp = z^3 - w          \amp \frac{dz}{dt} \amp = z^2 - 4z - w + 4 \amp\amp z, w\text{ version}\text{.}
\end{alignat*}
</div>
<div class="para">This modified example has a middle row with three columns, while the other rows have just one column, as a test of our routines for determining the <code class="code-inline tex2jax_ignore">mrow</code> with the greatest number of ampersands (and how many there are),</div>
<div class="displaymath process-math" id="md-9">
\begin{alignat*}{3}
\frac{dw}{dt} &amp;= z^3 - w\\
\frac{dx}{dt} &amp;= x^2 - 4x - y + 4 &amp; \frac{dy}{dt} &amp;= x^3 - y&amp;&amp; x, y\text{ third column}\\
\frac{dw}{dt} &amp; = z^3 - w\text{.}
\end{alignat*}
</div>
<div class="para">Final example demonstrates that ampersands in other objects (matrices here) can wreak havoc with computing the number of columns.  So we provide yet another attribute to override automatic detection, <code class="code-inline tex2jax_ignore">alignat-columns</code>.  This is the number of <em class="emphasis">columns</em> not the number of <em class="emphasis">ampersands</em>.  Generally, for <span class="process-math">\(c\)</span> columns, there will be <span class="process-math">\(2c-1\)</span> ampersands.</div>
<div class="displaymath process-math" id="md-10">
\begin{alignat*}{2}
A &amp;= \begin{bmatrix}1 &amp; 2 \\ 3 &amp; 4\end{bmatrix}
&amp;
I &amp;= \begin{bmatrix}1 &amp; 0 \\ 0 &amp; 1\end{bmatrix}\text{.}
\end{alignat*}
</div>
<div class="para">One caveat: if your number of ampersands is even (see advice above about using an odd number) behavior should still be correct, as in next example.</div>
</div>
<div class="para logical" id="p-292">
<div class="para">If you want super-precise control over alignment of the terms of a system of equations (linear or not) you can use the <code class="code-inline tex2jax_ignore">alignat</code> option to advantage by not including any extra space.  This example is modified slightly from a post by Alex Jordan:</div>
<div class="displaymath process-math" id="md-11">
\begin{alignat*}{4}
2x \amp {}+{} \amp  y \amp {}+{} \amp 3z \amp {}={} \amp 10\\
x  \amp       \amp    \amp {}+{} \amp  z \amp {}={} \amp 6\\
x  \amp {}+{} \amp 3y \amp {}+{} \amp 2z \amp {}={} \amp 13.
\end{alignat*}
</div>
<div class="para">Beautiful.</div>
</div>
<div class="para logical" id="p-293">
<div class="para">A long equation, to check layout on various screen sizes.  This is Weil’s “explicit formula” for the Riemann <span class="process-math">\(\zeta\)</span>-function:</div>
<div class="displaymath process-math" id="men-2">
\begin{equation}
\sum_\gamma S_-(\gamma) = \frac{\log Q}{\pi} \hat S_-(0)
+ \frac{1}{2\pi} \sum_{j=1}^d \Re\left\{ \int_{-\infty}^\infty \frac{\Gamma'}{\Gamma}\left(\frac{1}{4} + \frac{it}{2} + \mu_j\right)S_-(t) dt\right\}
- \frac{d}{2\pi}\hat S_-(0)\log \pi\text{.}\tag{7.3}
\end{equation}
</div>
</div>
<article class="example example-like" id="example-5"><h4 class="heading">
<span class="type">Example</span><span class="space"> </span><span class="codenumber">7.1</span><span class="period">.</span><span class="space"> </span><span class="title">Excessive Display Mathematics.</span>
</h4> <div class="para logical" id="p-294">
<div class="para">In print versions, a long run of displayed equations often needs to be broken across pages.  If you are reading some other version of this, then there is nothing to see here.  But for <span class="latex-logo">L<span class="A">a</span>T<span class="E">e</span>X</span> output it could be interesting.  First, with no extra effort, this page-long display should break naturally, no matter how the preceding material changes.</div>
<div class="displaymath process-math" id="md-12">
\begin{gather*}
x^2+y^2=z^2\\
a^2+b^2=c^2\\
\alpha^2+\beta^2=\gamma^2\\
m^2+n^2=p^2\\
x^2+y^2=z^2\\
a^2+b^2=c^2\\
\alpha^2+\beta^2=\gamma^2\\
m^2+n^2=p^2\\
x^2+y^2=z^2\\
a^2+b^2=c^2\\
\alpha^2+\beta^2=\gamma^2\\
m^2+n^2=p^2\\
x^2+y^2=z^2\\
a^2+b^2=c^2\\
\alpha^2+\beta^2=\gamma^2\\
m^2+n^2=p^2\\
x^2+y^2=z^2\\
a^2+b^2=c^2\\
\alpha^2+\beta^2=\gamma^2\\
m^2+n^2=p^2\\
x^2+y^2=z^2\\
a^2+b^2=c^2\\
\alpha^2+\beta^2=\gamma^2\\
m^2+n^2=p^2\\
x^2+y^2=z^2\\
a^2+b^2=c^2\\
\alpha^2+\beta^2=\gamma^2\\
m^2+n^2=p^2\\
x^2+y^2=z^2\\
a^2+b^2=c^2\\
\alpha^2+\beta^2=\gamma^2\\
m^2+n^2=p^2\\
x^2+y^2=z^2\\
a^2+b^2=c^2\\
\alpha^2+\beta^2=\gamma^2\\
m^2+n^2=p^2\\
x^2+y^2=z^2\\
a^2+b^2=c^2\\
\alpha^2+\beta^2=\gamma^2\\
m^2+n^2=p^2\\
x^2+y^2=z^2\\
a^2+b^2=c^2\\
\alpha^2+\beta^2=\gamma^2\\
m^2+n^2=p^2\\
x^2+y^2=z^2\\
a^2+b^2=c^2\\
\alpha^2+\beta^2=\gamma^2\\
m^2+n^2=p^2\text{.}
\end{gather*}
</div>
</div> <div class="para logical" id="p-295">
<div class="para">In this version we have turned off page breaking for the entire display, but then allowed a break at every fourth equation, so you should see a reasonably attractive page break right after one of the <span class="process-math">\(m^2+n^2=p^2\)</span> equations.</div>
<div class="displaymath process-math" id="mdn-4">
\begin{gather}
x^2+y^2=z^2\tag{7.4}\\
a^2+b^2=c^2\tag{7.5}\\
\alpha^2+\beta^2=\gamma^2\tag{7.6}\\
m^2+n^2=p^2\tag{7.7}\\
x^2+y^2=z^2\tag{7.8}\\
a^2+b^2=c^2\tag{7.9}\\
\alpha^2+\beta^2=\gamma^2\tag{7.10}\\
m^2+n^2=p^2\tag{7.11}\\
x^2+y^2=z^2\tag{7.12}\\
a^2+b^2=c^2\tag{7.13}\\
\alpha^2+\beta^2=\gamma^2\tag{7.14}\\
m^2+n^2=p^2\tag{7.15}\\
x^2+y^2=z^2\tag{7.16}\\
a^2+b^2=c^2\tag{7.17}\\
\alpha^2+\beta^2=\gamma^2\tag{7.18}\\
m^2+n^2=p^2\tag{7.19}\\
x^2+y^2=z^2\tag{7.20}\\
a^2+b^2=c^2\tag{7.21}\\
\alpha^2+\beta^2=\gamma^2\tag{7.22}\\
m^2+n^2=p^2\tag{7.23}\\
x^2+y^2=z^2\tag{7.24}\\
a^2+b^2=c^2\tag{7.25}\\
\alpha^2+\beta^2=\gamma^2\tag{7.26}\\
m^2+n^2=p^2\tag{7.27}\\
x^2+y^2=z^2\tag{7.28}\\
a^2+b^2=c^2\tag{7.29}\\
\alpha^2+\beta^2=\gamma^2\tag{7.30}\\
m^2+n^2=p^2\tag{7.31}\\
x^2+y^2=z^2\tag{7.32}\\
a^2+b^2=c^2\tag{7.33}\\
\alpha^2+\beta^2=\gamma^2\tag{7.34}\\
m^2+n^2=p^2\tag{7.35}\\
x^2+y^2=z^2\tag{7.36}\\
a^2+b^2=c^2\tag{7.37}\\
\alpha^2+\beta^2=\gamma^2\tag{7.38}\\
m^2+n^2=p^2\tag{7.39}\\
x^2+y^2=z^2\tag{7.40}\\
a^2+b^2=c^2\tag{7.41}\\
\alpha^2+\beta^2=\gamma^2\tag{7.42}\\
m^2+n^2=p^2\tag{7.43}\\
x^2+y^2=z^2\tag{7.44}\\
a^2+b^2=c^2\tag{7.45}\\
\alpha^2+\beta^2=\gamma^2\tag{7.46}\\
m^2+n^2=p^2\tag{7.47}\\
x^2+y^2=z^2\tag{7.48}\\
a^2+b^2=c^2\tag{7.49}\\
\alpha^2+\beta^2=\gamma^2\tag{7.50}\\
m^2+n^2=p^2\text{.}\tag{7.51}
\end{gather}
</div>
</div> <div class="para" id="p-296">So.  Do not take any extra steps and let <span class="latex-logo">L<span class="A">a</span>T<span class="E">e</span>X</span> figure out the breaks.  If you do not like a break, modify the <code class="code-inline tex2jax_ignore">md</code> or <code class="code-inline tex2jax_ignore">mdn</code> to go back to the AMSmath default behavior and not break at all.  Ever.  Or rather, go further and modify an individual <code class="code-inline tex2jax_ignore">mrow</code> to suggest that it is a good place for a break.</div></article><div class="para logical" id="Cde">
<div class="para">This is a poorly-authored paragaph to test the conversion to <abbr class="initialism">HTML</abbr>.  There are two displayed equations, separated by a period ending the first one’s sentence, which should migrate into the display, and not leave behind an empty paragraph:</div>
<div class="displaymath process-math">
\begin{equation*}
z+y = z\text{.}
\end{equation*}
</div>
<div class="displaymath process-math">
\begin{equation*}
a + b = c\text{.}
\end{equation*}
</div>
<div class="para">This final sentence should remain, inside another <abbr class="initialism">HTML</abbr> paragraph, without the second equation’s period.</div>
</div></section><section class="subsection" id="subsection-10"><h3 class="heading hide-type">
<span class="type">Subsection</span> <span class="codenumber">7.3</span> <span class="title"><span class="latex-logo">L<span class="A">a</span>T<span class="E">e</span>X</span> Packages and MathJax Extensions</span>
</h3>
<div class="para" id="p-298">If you would like to use macros from a <span class="latex-logo">L<span class="A">a</span>T<span class="E">e</span>X</span> package <em class="emphasis">and</em> there is a MathJax extension <em class="emphasis">of the same name</em> which implements the same macros, then you may use these with your mathematics as we demonstrate here.</div>
<div class="para logical" id="p-299">
<div class="para">This example is from Jason Underdown.  The package is named <code class="code-inline tex2jax_ignore">cancel</code> and is included in the TeXLive distribution, so is fairly standard.  The particular macro being demonstrated is <code class="code-inline tex2jax_ignore">\cancelto{}{}</code>.</div>
<div class="displaymath process-math">
\begin{equation*}
\lim_{b \rightarrow \infty}\left[\cancelto{0}{-\frac{1}{s}e^{-sb}} + \frac{1}{s}\right]\text{.}
\end{equation*}
</div>
<div class="para">Look at the source of this article to see the package name being supplied in a <code class="code-inline tex2jax_ignore">latex-preamble/package</code> element within the <code class="code-inline tex2jax_ignore">docinfo</code> section.  That is the only setup required to make the macro usable in <span class="latex-logo">L<span class="A">a</span>T<span class="E">e</span>X</span> and <abbr class="initialism">HTML</abbr> output.</div>
</div>
<div class="para" id="p-300">The packages appear before the author-supplied macros, so you can use macros from the packages as building blocks for document-specific macros.  We cannot guarantee there will be no conflicts between additional packages and those in use normally, or added in the future.  So use at your own risk.</div></section><section class="subsection" id="subsection-11"><h3 class="heading hide-type">
<span class="type">Subsection</span> <span class="codenumber">7.4</span> <span class="title">Advanced Mathematics</span>
</h3>
<div class="para" id="p-301">MathJax is extremely capable in rendering a subset of <span class="latex-logo">L<span class="A">a</span>T<span class="E">e</span>X</span> in web browsers, and improving all the time.  You can get fairly fancy with some of its supported commands.  In particular, if you need to mix in a few words with your mathematics, the <code class="code-inline tex2jax_ignore">\text{}</code> macro is supported.  For example, you might use an “if” or an “otherwise” in the definition of a piecewise function.</div>
<div class="para logical" id="p-302">
<div class="para">Consider that the first line below is text sandwiched in-between two Greek letters, wrapped in a <code class="code-inline tex2jax_ignore">\text{}</code> macro.  In HTML output we have taken care that the font for text material within display mathematics should match the font of the  surrounding paragraph, as also happens with <span class="latex-logo">L<span class="A">a</span>T<span class="E">e</span>X</span> output.  The second line is nearly identical in the source, but is just naked text being rendered like a slew of variables.</div>
<div class="displaymath process-math" id="md-13">
\begin{gather*}
\alpha\text{ is not equal to }\beta\\
\alpha is not equal to \beta\\
\alpha\neq\beta\text{.}
\end{gather*}
</div>
<div class="para">We are not suggesting here that using words in place of symbols, as in the first line, is a good practice.  (It is not.)</div>
</div>
<div class="para logical" id="p-303">
<div class="para">The following example is a good stress-test of using the <code class="code-inline tex2jax_ignore">\text{}</code> macro to achieve certain effects.  Note the Unicode left and right smart quotes.  This a contribution from Alex Jordan as part of his work on <span class="booktitle">APEX Calculus</span>.</div>
<div class="displaymath process-math" id="md-14">
\begin{gather*}
y \rightarrow \frac{\sin(0) }{0} \rightarrow {{\text{“}}\atop{}}\frac{0}{0}{{\text{”}}\atop{}}\text{.}
\end{gather*}
</div>
<div class="para">And another one from Alex.  Note the use of the <code class="code-inline tex2jax_ignore">\mathord{}</code> and <code class="code-inline tex2jax_ignore">\mathrel{}</code> macros to control spacing around the mathematical symbols.  Examine the source to see how the quotation marks have been authored with <abbr class="initialism">XML</abbr> syntax for Unicode characters, since we do not allow most markup inside mathematics.</div>
<div class="displaymath process-math" id="md-15">
\begin{gather*}
\zeta(1)=\sum_{n=1}^{\infty}\frac{1}{n}\mathrel{\text{ “}\mathord{=}{\text{” }}}\prod_{p}\left(\frac{1}{1-1/p}\right)=\prod_{p}\left(\frac{1}{1-p^{-1}}\right)
\end{gather*}
</div>
</div>
<div class="para logical" id="p-304">
<div class="para">Generally, you cannot use any <abbr class="initialism">XML</abbr> elements inside of the mathematics elements.  An exception is the <code class="code-inline tex2jax_ignore">xref</code> element which you might want to use to provide justifications for the steps of a derivation.  Here is a visual example that is mathematically meaningless,</div>
<div class="displaymath process-math" data-contains-math-knowls="./knowl/corollary-FTC-derivative.html ./knowl/theorem-FTC.html ./knowl/theorem-number-01.html" id="md-16">
\begin{align*}
A&amp;=B+C&amp;&amp;\knowl{./knowl/corollary-FTC-derivative.html}{\text{Corollary 4.1}}\\
&amp;=D+E&amp;&amp;\knowl{./knowl/theorem-FTC.html}{\text{The Fundamental Theorem of Calculus}}\\
&amp;=F+G&amp;&amp;\knowl{./knowl/theorem-number-01.html}{\text{A nice result}}\text{.}
\end{align*}
</div>
</div>
<div class="para logical" id="p-305">
<div class="para">Scott Beaver likes to write short chains of equalities all in one line, with the cross-references sitting on each equals sign.  Here we test the <span class="latex-logo">L<span class="A">a</span>T<span class="E">e</span>X</span> <code class="code-inline tex2jax_ignore">\overset</code> and <code class="code-inline tex2jax_ignore">\underset</code> macros wrapping a PreTeXt <code class="code-inline tex2jax_ignore">&lt;xref&gt;</code>, with and without content, inside an <code class="code-inline tex2jax_ignore">&lt;me&gt;</code> element.  Note that  <code class="code-inline tex2jax_ignore">\stackrel</code> is obsolete, and <code class="code-inline tex2jax_ignore">\overunderset</code> is not yet supported by MathJax (but see <a class="external" href="https://github.com/mathjax/MathJax/issues/2704" target="_blank">GitHub #2704</a><a href="" data-knowl="" class="id-ref fn-knowl original" data-refid="hk-fn-14" id="fn-14"><sup> 2 </sup></a>).  The mathematics is Scott’s, the reasons are totally unrelated to the math.</div>
<div class="displaymath process-math" data-contains-math-knowls="./knowl/theorem-FTC.html ./knowl/definition-indefinite-integral.html ./knowl/theorem-FTC.html ./knowl/theorem-FTC.html">
\begin{equation*}
AC-AD
\overset{\knowl{./knowl/theorem-FTC.html}{2.1}}{=}
A(C-D)
\underset{\knowl{./knowl/definition-indefinite-integral.html}{2.2}}{=}
A0_{n\times p}
\overset{\knowl{./knowl/theorem-FTC.html}{Thm. 2.1}}{=}
0_{m\times p}
\end{equation*}
</div>
<div class="para">We suggest using cross-references that only display numbers (<code class="code-inline tex2jax_ignore">&lt;xref&gt;</code> with <code class="code-inline tex2jax_ignore">@text</code> set to <code class="code-inline tex2jax_ignore">global</code>) since if you stick to elements like <code class="code-inline tex2jax_ignore">&lt;theorem&gt;</code>, <code class="code-inline tex2jax_ignore">&lt;lemma&gt;</code>, <code class="code-inline tex2jax_ignore">&lt;definition&gt;</code>, or <code class="code-inline tex2jax_ignore">&lt;axiom&gt;</code>, then the numbers will be unambiguous and the target of the cross-reference will contain full information.  But note that if you mix in divisions, or perhaps figures, as reasons then there is a possibility that numbers will need to be qualified by their type.  We have provided an abbreviation for one cross-reference to <a href="" class="xref" data-knowl="./knowl/theorem-FTC.html" title="Theorem 2.1: The Fundamental Theorem of Calculus">Theorem 2.1</a> (which will not benefit from automatic translation to other languages).</div>
</div></section><section class="subsection" id="subsection-12"><h3 class="heading hide-type">
<span class="type">Subsection</span> <span class="codenumber">7.5</span> <span class="title">Local Tags on Equations</span>
</h3>
<div class="para" id="p-306">If you are not writing a research monograph, maybe (a) you will not use many numbered equations, or do not like the looks of them, or feel they scare your readers, and (b) maybe your cross-references are always local-ish, like strictly within an <code class="code-inline tex2jax_ignore">example</code> or a <code class="code-inline tex2jax_ignore">proof</code>.  For this situation you can create, and employ, a “local” tag on a displayed equation.  Nothing enforces the idea of what constitutes local, and there is nothing to stop you from using the same symbols more than once.  With freedom comes responsibility.</div>
<div class="para logical" id="p-307">
<div class="para">Use the <code class="code-inline tex2jax_ignore">@tag</code> attribute on an <code class="code-inline tex2jax_ignore">mrow</code>, only.  (Remember, you can have just one <code class="code-inline tex2jax_ignore">mrow</code>.)  The behavior is identical within an <code class="code-inline tex2jax_ignore">md</code> or <code class="code-inline tex2jax_ignore">mdn</code>.  The value of the <code class="code-inline tex2jax_ignore">@tag</code> attribute is a symbol name.  The prefix <code class="code-inline tex2jax_ignore">d</code> means “double”, and the prefix <code class="code-inline tex2jax_ignore">t</code> means “triple”.  So allowed values are</div>
<pre class="code-display tex2jax_ignore">star, dstar, tstar
dagger, ddagger, tdagger
daggerdbl, ddaggerdbl, tdaggerdbl
hash, dhash, thash
maltese, dmaltese, tmaltese
</pre>
<div class="para">Cross-references to these tagged equations happens in the usual way and should behave as expected.  We test the double versions to make sure the symbols render properly in various output formats.</div>
<div class="displaymath process-math" data-contains-math-knowls="./knowl/equation-local-star.html ./knowl/equation-local-dagger.html ./knowl/equation-local-daggerdbl.html ./knowl/equation-local-hash.html ./knowl/equation-local-maltese.html ./knowl/section-cross-referencing.html" id="mdn-5">
\begin{align}
c^2 \amp = a^2+b^2\tag{✶✶}\\
c^2 \amp = a^2+b^2\tag{††}\\
c^2 \amp = a^2+b^2\tag{‡‡}\\
c^2 \amp = a^2+b^2\tag{##}\\
c^2 \amp = a^2+b^2\tag{✠✠}\\
z^2 \amp = x^2+y^2\tag{7.52}
\end{align}
</div>
<div class="para">Here are the local cross-references: <a href="" class="xref" data-knowl="./knowl/equation-local-star.html" title="Equation">(✶✶)</a>, <a href="" class="xref" data-knowl="./knowl/equation-local-dagger.html" title="Equation">(††)</a>, <a href="" class="xref" data-knowl="./knowl/equation-local-daggerdbl.html" title="Equation">(‡‡)</a>, <a href="" class="xref" data-knowl="./knowl/equation-local-hash.html" title="Equation">(##)</a>, <a href="" class="xref" data-knowl="./knowl/equation-local-maltese.html" title="Equation">(✠✠)</a>.  We test another farther away in <a href="section-cross-referencing.html" class="internal" title="Section 20: Cross-Referencing">Section 20</a>, contrary to our advice above.</div>
</div></section><section class="subsection" id="commutative-diagrams"><h3 class="heading hide-type">
<span class="type">Subsection</span> <span class="codenumber">7.6</span> <span class="title">Commutative Diagrams</span>
</h3>
<div class="para logical" id="p-308">
<div class="para">This diagram is authored by Tom Judson using the syntax of the <abbr class="initialism">AMS</abbr> <span class="latex-logo">L<span class="A">a</span>T<span class="E">e</span>X</span> “CD” package.  Inside of a <code class="code-inline tex2jax_ignore">&lt;me&gt;</code> element start with <code class="code-inline tex2jax_ignore">\begin{CD}</code>.  Remember to escape the less-than character.</div>
<div class="displaymath process-math">
\begin{equation*}
\begin{CD}
E[x]/\langle p(x) \rangle    @&gt;\psi&gt;&gt;  F[x]/\langle q(x) \rangle\\
@VV{\sigma}V        @VV{\tau}V\\
E(\alpha)     @&gt;\overline{\phi}&gt;&gt;  F(\beta)\\
@VVV        @VVV\\
E     @&gt;\phi&gt;&gt;  F
\end{CD}
\end{equation*}
</div>
<div class="para">While this package is not as flexible as some generic drawing packages, it has the advantage of full support by MathJax, and thus the <abbr class="initialism">HTML</abbr> version will be more accessible.</div>
</div></section><section class="subsection" id="line-breaking-math"><h3 class="heading hide-type">
<span class="type">Subsection</span> <span class="codenumber">7.7</span> <span class="title">Line-Breaking after Mathematics</span>
</h3>
<div class="para" id="p-309">As of 2021-05-14, in <abbr class="initialism">HTML</abbr> output the next sentence should just fill a full line across the page.  We take active measures to bind the concluding period to the final bit of mathematics, the variable <span class="process-math">\(x\text{.}\)</span>  The prevents a bad line break which could see the period <em class="emphasis">begin</em> a new line, all by itself.  In the event that the line-breaking siutation improves, we could relax these measures.  This testing is only relevant to <abbr class="initialism">HTML</abbr> output, not <span class="latex-logo">L<span class="A">a</span>T<span class="E">e</span>X</span> output.</div>
<div class="para" id="p-310">xxx xxx xxx xxx xxx xxx xxx xxx xxx xxx xxx xxx xxx xxx xxx xxx xxx xxx xxx xxx <span class="process-math">\(x\text{.}\)</span>
</div></section><section class="subsection" id="font-math"><h3 class="heading hide-type">
<span class="type">Subsection</span> <span class="codenumber">7.8</span> <span class="title">Fonts and Mathematics</span>
</h3>
<div class="para" id="p-311">This section is about testing types and sizes of fonts, not so much about using different typefaces.  First, one long displayed equation, which is designed to be full-width for <span class="latex-logo">L<span class="A">a</span>T<span class="E">e</span>X</span> output when using defaults as of 2020-01-29 (commit <code class="code-inline tex2jax_ignore">defd4bffd462e7ea</code>).</div>
<div class="para logical" id="p-312">
<div class="para">Start paragraph.</div>
<div class="displaymath process-math">
\begin{equation*}
a^2 + b^2 + a^2 + b^2 + a^2 + b^2 + a^2 + b^2 + a^2 + b^2 + a^2 + b^2 + a^2 + b^2 + a^2 + b^2 + a^2 + b^2 + a^2 + b^2
\end{equation*}
</div>
<div class="para">End paragraph.</div>
</div>
<div class="para logical" id="p-313">
<div class="para">The next paragraph has five ways to write the sine of <span class="process-math">\(x\text{,}\)</span> bracketed by plain text versions.  This tests font size and the fonts employed.  The raw source of this paragraph is (spread over two lines)</div>
<pre class="code-display tex2jax_ignore">sin x | &lt;m&gt;\sin x&lt;/m&gt; | &lt;m&gt;\text{sin}\ x&lt;/m&gt; | &lt;m&gt;\mathrm{sin}\ x&lt;/m&gt; |
&lt;m&gt;\text{sin}x&lt;/m&gt; | &lt;m&gt;sin x&lt;/m&gt; | sin x
</pre>
<div class="para">The five ways, from good to bad,</div>
<ol class="decimal">
<li id="li-40"><div class="para" id="p-derived-li-40">The best way, using  <code class="code-inline tex2jax_ignore">\sin</code>.  Note the distance to the <span class="process-math">\(x\text{.}\)</span>
</div></li>
<li id="li-41"><div class="para" id="p-derived-li-41">With a <code class="code-inline tex2jax_ignore">\text{}</code> macro.</div></li>
<li id="li-42"><div class="para" id="p-derived-li-42">With a <code class="code-inline tex2jax_ignore">\mathrm{}</code> macro.  Not recommended for PreTeXt.</div></li>
<li id="li-43"><div class="para" id="p-derived-li-43">Without a space.  Note that the previous two require explicit spacing.</div></li>
<li id="li-44"><div class="para" id="p-derived-li-44">No extra effort, so <span class="latex-logo">L<span class="A">a</span>T<span class="E">e</span>X</span> renders as a product of four variables.</div></li>
</ol>
</div>
<div class="para" id="p-314">sin x | <span class="process-math">\(\sin x\)</span> | <span class="process-math">\(\text{sin}\ x\)</span> | <span class="process-math">\(\mathrm{sin}\ x\)</span>  | <span class="process-math">\(\text{sin}x\)</span> | <span class="process-math">\(sin x\)</span> | sin x</div>
<div class="para" id="p-315">Finally a simple paragraph that places a text “x” next to a variable “x”.</div>
<div class="para" id="p-316">wordxx<span class="process-math">\(x+x\)</span>xxword</div></section><section class="subsection" id="miscellaneous-math"><h3 class="heading hide-type">
<span class="type">Subsection</span> <span class="codenumber">7.9</span> <span class="title">Miscellaneous</span>
</h3>
<div class="para logical" id="p-317">
<div class="para">In <abbr class="initialism">HTML</abbr> output, a MathJax workaround for a Safari rendering bug was inserting extra spaces after textual subscripts and superscripts (<a class="external" href="https://groups.google.com/g/mathjax-users/c/ANjLK9KtcWA/m/vlHaPja-AwAJ" target="_blank">MathJax thread</a><a href="" data-knowl="" class="id-ref fn-knowl original" data-refid="hk-fn-15" id="fn-15"><sup> 3 </sup></a>).  PreTeXt CSS now applies a correction.  The following tests if the CSS fix is sufficient, and could be used to test the necessity of our fix in the future.  Following is the original report, though <code class="code-inline tex2jax_ignore">NOT</code> has been moved to a superscript:</div>
<div class="displaymath process-math" id="md-17">
\begin{gather*}
T_\text{clk}-t_\text{su} \gt t_\text{clk-Q} + \max\left( t_\text{XOR}, t^\text{NOT} \right)\text{.}
\end{gather*}
</div>
<div class="para">There should not be anything to see in <span class="latex-logo">L<span class="A">a</span>T<span class="E">e</span>X</span>/<abbr class="initialism">PDF</abbr> output. (2021-10-21)</div>
</div></section></section><div class="hidden-content tex2jax_ignore" id="hk-fn-13"><div class="fn"><code class="code-inline tex2jax_ignore">www.mathjax.org/demos/tex-samples/</code></div></div>
<div class="hidden-content tex2jax_ignore" id="hk-fn-14"><div class="fn"><code class="code-inline tex2jax_ignore">github.com/mathjax/MathJax/issues/2704</code></div></div>
<div class="hidden-content tex2jax_ignore" id="hk-fn-15"><div class="fn"><code class="code-inline tex2jax_ignore">groups.google.com/g/mathjax-users/c/ANjLK9KtcWA/m/vlHaPja-AwAJ</code></div></div>
</body>
</html>
